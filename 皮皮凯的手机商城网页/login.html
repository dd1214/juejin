<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>账号 - 登录</title>
    <link href="./css/login.css" type="text/css" rel="stylesheet" />
  </head>
  <body>
    <div id="left">
      <img id="background-image" src="./image/login/background-image.jpg">
    </div>

    <div id="right">
      <div id="nav">
        <div class="nav-left">
          <img src="">
          <p>账号</p>
        </div>

        <div class="nav-right ">
          <select id="language" class="nav-right font ch">
            <option selected>中文(简体)</option>
            <option>中文(繁体)</option>
            <option>English</option>
          </select>
          
          <ul class="nav-right font">
            <li class="ch">用户协议</li>
            <li class="ch">隐私政策</li>
            <li class="ch">帮助中心</li>
            <li>|</li>
          </ul>        
        </div>
      </div>

      <div id="main">
        <a href="./login.html" class="selected  pointer">登录</a>
        <a href="./zhuce.html" class="noselected  pointer">注册</a>
        <div id="in">
          <input id="username" type="text" placeholder="邮箱/手机号码/ID">
          <input id="password" type="password" placeholder="密码">
        </div>
        <div class="ch-box">
          <input id="ch-box" class="ch-box" type="checkbox">
          <div id="text">
            已阅读并同意帐号<a class="pointer">用户协议</a>和<a class="pointer">隐私政策</a>
          </div>
        </div>
        <div>
          <button id="logining" class="pointer" onclick="login()">登录</button>
        </div>
        <div class="action">
          <a id="a1" class="pointer">忘记密码？</a>
          <a id="a2" class="pointer">手机号登录</a>
        </div>
        <div id="other">
          <p>其他方式登录</p>
          <div>
            <img src="./image/login/支付宝.png">
            <img src="./image/login/微信.png">
            <img src="./image/login/QQ.png">
            <img src="./image/login/微博.png">
          </div>
        </div>
      </div>

      <div id="tail">
        
      </div>
    </div>
  </body>
  <script>
    function jump() {
      document.location = './index.html';
    }
    const loginUrl="http://diandian.free.idcfengye.com/users/login"
     function login() {
      var username = document.getElementById("username").value //拿到input框的value值，即账号密码
      var password = document.getElementById("password").value;
      fetch(loginUrl, {
        method: 'post',
        body: JSON.stringify({
          username,
          password
        }),
        headers: {
          'Content-type': 'application/json'
        }}).then(
          res => res.json()
          )
        .then(data => {
        // data: {
        //   token: 登录成功时会返回 token， 失败时没有
        //   flag: true | false, 表示是否登录成功
        // }
        if(data.flag){
         jump()
        }else{
          alert('登录失败，请检查输入！')
        }
      }
      )
    }
    
  </script>
</html>
  
